<?function mailer_install(){    global $wpdb;    function table_exists($tablename, $database = false) {    if(!$database) {        $res = mysql_query("SELECT DATABASE()");        $database = mysql_result($res, 0);    }    $res = mysql_query("        SELECT COUNT(*) AS count         FROM information_schema.tables         WHERE table_schema = '$database'         AND table_name = '$tablename'    ");    return mysql_result($res, 0) == 1;}                	  	if (!table_exists($wpdb->wpmailer_users)) 		{	  		$sql = "CREATE TABLE $wpdb->wpmailer_users (        id INT(9) NOT NULL AUTO_INCREMENT,        first_name VARCHAR(80) NOT NULL,        last_name VARCHAR(80) NOT NULL,        email VARCHAR(80) NOT NULL,        cats VARCHAR(80) NOT NULL,        version VARCHAR(80) NOT NULL,        pass VARCHAR(80) NOT NULL,        verified INT(1) DEFAULT 0,	UNIQUE KEY id (id)    );";	  		dbDelta($sql);	  	}	  	if (!table_exists($wpdb->wpmailer_structure)) 		{	  		$sql = "CREATE TABLE $wpdb->wpmailer_structure (        id INT(9) NOT NULL AUTO_INCREMENT,        description VARCHAR(80) NOT NULL,        cat_ids VARCHAR(80) NOT NULL,        breaking INT(1) DEFAULT 0,	UNIQUE KEY id (id)    );";	  		dbDelta($sql);    $wpdb->query("INSERT INTO $wpdb->wpmailer_structure(title, breaking)        VALUES('Breaking News', '1')");    $wpdb->query("INSERT INTO $wpdb->wpmailer_structure(title)        VALUES('Daily E-mail')");	  	}	  	if (!table_exists($wpdb->mp_mails)) 		{	  		$sql = "CREATE TABLE $mailstable (        id INT(9) NOT NULL AUTO_INCREMENT,        subject VARCHAR(80) NOT NULL,        body longTEXT NOT NULL,        date INT(20) NOT NULL,	UNIQUE KEY id (id)    );";	  		dbDelta($sql);		}}?>